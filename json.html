<!doctype html>
<html lang="fi">
<head>
  <meta charset="utf-8">
  <title>Oma JSON-tietue</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Otetaan Bootstrap ja oma tyyli käyttöön -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="styles.css" rel="stylesheet">
</head>
<body>

  <!-- Ylävalikko -->
  <nav class="navbar navbar-expand-lg bg-body-tertiary">
    <div class="container">
      <a class="navbar-brand" href="./"><b>JSON & Fetch API</b></a>
      <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#nav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div id="nav" class="collapse navbar-collapse">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link active" href="json.html">Oma tietue</a></li>
          <li class="nav-item"><a class="nav-link" href="toteutus.html">Toteutus JSON</a></li>
          <li class="nav-item"><a class="nav-link" href="pokemon.html">Poke haku</a></li>
          <li class="nav-item"><a class="nav-link" href="saa.html">Sää Helsinki</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Sisältö -->
  <main class="container">
    <div class="card p-4">
      <h1>Oma JSON-tietue</h1>
      <p>Tämä tieto haetaan omasta JSON-tiedostosta ja näytetään sivulla.</p>
      <div id="vastaus" class="mt-3">Ladataan...</div>
    </div>
  </main>

  <footer class="container text-muted py-4">
    © 2025 – JSON tehtävä
  </footer>

  <!-- JS koodi joka hakee JSONin ja näyttää sen -->
  <script>
  // Haetaan tiedosto data-kansiosta
  fetch('data/tietue.json')
    .then(function(response) {
      return response.json(); // muutetaan JS-olioksi
    })
    .then(function(data) {
      naytaTiedot(data); // kutsutaan omaa funktiota
    })
    .catch(function(error) {
      document.getElementById("vastaus").innerHTML = "Virhe datan haussa";
      console.error(error);
    });

  // Tämä funktio näyttää tiedot sivulla
  function naytaTiedot(obj) {
    let teksti = "";

    teksti += "<h2>" + obj.otsikko + "</h2>";
    teksti += "<p>" + obj.kuvaus + "</p>";
    teksti += "<img src='" + obj.kuva + "' alt='Kuva' class='img-fluid mb-3'>";

    teksti += "<h3>Opintojakso</h3>";
    teksti += "Nimi: " + obj.opintojakso.nimi + "<br>";
    teksti += "Tunnus: " + obj.opintojakso.tunnus + "<br>";
    teksti += "Opintopisteet: " + obj.opintojakso.opintopisteet + "<br>";

    teksti += "<h3 class='mt-3'>Aiheet</h3>";
    for (let i = 0; i < obj.tekniikat.length; i++) {
      teksti += "<b>" + obj.tekniikat[i].aihe + "</b>: ";
      teksti += "<a href='" + obj.tekniikat[i].linkki + "' target='_blank'>" + obj.tekniikat[i].linkki + "</a><br>";
    }

    document.getElementById("vastaus").innerHTML = teksti;
  }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
